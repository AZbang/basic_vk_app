(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{46:function(e){e.exports={TMDB_API:"c7b592edabaa041f25cce6f4d67176a1"}},53:function(e,t,n){e.exports=n(94)},90:function(e,t,n){},92:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(35),c=n.n(o),i=n(10),s=n(17),l=n(21),u=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function p(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var d=n(22),m=n(11),h=n(52),v=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"LOADING_START":return!0;case"LOADING_END":return!1;default:return e}},f=n(44),b=n.n(f)()({searchQuery:"",search:[],popular:[],bookmarks:[],friends:[],all:[]}),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_SEARCH_MOVIES":return e.merge({searchQuery:t.query});case"SET_SEARCH_MOVIES":return e.merge({search:t.data});case"SET_POPULAR_MOVIES":return e.merge({popular:t.data});case"ADD_TO_BOOKMARKS":return e.merge({bookmarks:e.bookmarks.concat([t.movie])});case"REMOVE_FROM_BOOKMARKS":return e.merge({bookmarks:e.bookmarks.filter(function(e){return e.id!==t.movie.id})});default:return e}},O={accessToken:"",friends:[]},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;switch((arguments.length>1?arguments[1]:void 0).type){case"FETCH_ACCESS_TOKEN":case"FETCH_FRIENDS":default:return e}},g=n(18),y=n.n(g),j=n(8),_=n(45),w=n.n(_),S=n(46),T=y.a.mark(I),C=y.a.mark(R),A=new w.a(S.TMDB_API);function I(e){var t;return y.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(j.b)({type:"LOADING_START"});case 2:return n.prev=2,n.next=5,Object(j.a)(A.searchMulti,{query:e.query,language:"ru"});case 5:return t=n.sent,n.next=8,Object(j.b)({type:"SET_SEARCH_MOVIES",data:t.results});case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(2),n.next=14,Object(j.b)({type:"SET_SEARCH_MOVIES",data:[]});case 14:return n.next=16,Object(j.b)({type:"LOADING_END"});case 16:case"end":return n.stop()}},T,this,[[2,10]])}function R(e){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.b)({type:"LOADING_START"});case 2:return e.prev=2,e.next=5,Object(j.a)(A.discoverMovie,{language:"ru"});case 5:return t=e.sent,e.next=8,Object(j.b)({type:"SET_POPULAR_MOVIES",data:t.results});case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(2),e.next=14,Object(j.b)({type:"SET_POPULAR_MOVIES",data:[]});case 14:return e.next=16,Object(j.b)({type:"LOADING_END"});case 16:case"end":return e.stop()}},C,this,[[2,10]])}var M=y.a.mark(P);function P(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.c)("FETCH_SEARCH_MOVIES",I);case 2:return e.next=4,Object(j.c)("FETCH_POPULAR_MOVIES",R);case 4:case"end":return e.stop()}},M,this)}var x,B=Object(m.a)(),D=Object(h.a)(),N=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.d,V=Object(d.e)((x=B,Object(d.c)({router:Object(l.connectRouter)(x),vk:k,movies:E,loading:v})),N(Object(d.a)(Object(l.routerMiddleware)(B),D)));D.run(P);var H=n(13),L=n(29),F=n(15),G=n(14),K=n(16),U=n(4),W=n(47),q=n.n(W),Q=n(30),J=n.n(Q),X=n(48),$=n.n(X),z=n(49),Y=(n(83),n(31)),Z=n(51),ee=n.n(Z);n(90);var te=function(e){function t(){var e,n;Object(H.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(F.a)(this,(e=Object(G.a)(t)).call.apply(e,[this].concat(o)))).render=function(){return a.a.createElement("div",{className:"card-movie",style:{backgroundImage:"url("+function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return"https://image.tmdb.org/t/p/w".concat(t).concat(e)}(n.props.data.poster_path)+")"}},a.a.createElement("span",{className:"card-movie__bookmarks",onClick:n.props.isBookmarks?n.props.onRemoveBookmarks:n.props.onAddBookmarks},n.props.isBookmarks?a.a.createElement(ee.a,{fill:"#5181B8"}):a.a.createElement(J.a,{fill:"#5181B8"})))},n}return Object(K.a)(t,e),t}(a.a.Component);var ne=function(e){function t(){var e,n;Object(H.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(F.a)(this,(e=Object(G.a)(t)).call.apply(e,[this].concat(o)))).getCardMoviesList=function(){return n.props.movies.map(function(e){return a.a.createElement(Y.Col,{xs:6,key:e.id},a.a.createElement(te,{isBookmarks:n.props.bookmarks.some(function(t){return t.id===e.id}),onRemoveBookmarks:function(){return n.removeBookmarks(e)},onAddBookmarks:function(){return n.addBookmarks(e)},data:e}))})},n.addBookmarks=function(e){n.props.dispatch(function(e){return{type:"ADD_TO_BOOKMARKS",movie:e}}(e))},n.removeBookmarks=function(e){n.props.dispatch(function(e){return{type:"REMOVE_FROM_BOOKMARKS",movie:e}}(e))},n.render=function(){return a.a.createElement(Y.Grid,{fluid:!0,className:"card-movies-list"},a.a.createElement(Y.Row,null,n.getCardMoviesList()))},n}return Object(K.a)(t,e),t}(a.a.Component);var re=Object(i.connect)(function(e){return{bookmarks:e.movies.bookmarks}})(ne),ae=function(e){function t(){var e,n;Object(H.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(F.a)(this,(e=Object(G.a)(t)).call.apply(e,[this].concat(o)))).render=function(){return a.a.createElement(U.View,{id:n.props.id,activePanel:n.props.id},a.a.createElement(U.Panel,{id:n.props.id},a.a.createElement(U.PanelHeader,null,"#\u0427\u0422\u041e\u041f\u041e\u0421\u041c\u041e\u0422\u0420\u0415\u0422\u042c"),a.a.createElement(U.Group,{title:"\u041d\u041e\u0412\u0418\u041d\u041a\u0418 \u041a\u0418\u041d\u041e"},a.a.createElement(re,{movies:n.props.popular})),n.props.loading?a.a.createElement("div",{style:{height:100}},a.a.createElement(U.Spinner,null)):null))},n}return Object(K.a)(t,e),Object(L.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"FETCH_POPULAR_MOVIES"})}}]),t}(a.a.Component);var oe=Object(i.connect)(function(e){return{popular:e.movies.popular,loading:e.loading}})(ae),ce=function(e){function t(){var e,n;Object(H.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(F.a)(this,(e=Object(G.a)(t)).call.apply(e,[this].concat(o)))).timeId=null,n.onChange=function(e){n.timeId&&clearTimeout(n.timeId),n.timeId=setTimeout(function(){n.props.dispatch({type:"FETCH_SEARCH_MOVIES",query:e})},500)},n.render=function(){return a.a.createElement(U.View,{id:n.props.id,activePanel:n.props.id},a.a.createElement(U.Panel,{id:n.props.id},a.a.createElement(U.PanelHeader,{noShadow:!0},"#\u0427\u0422\u041e\u041f\u041e\u0421\u041c\u041e\u0422\u0420\u0415\u0422\u042c"),a.a.createElement(U.Search,{onChange:n.onChange}),a.a.createElement("br",null),a.a.createElement(re,{movies:n.props.search}),n.props.loading?a.a.createElement("div",{style:{height:100}},a.a.createElement(U.Spinner,null)):null))},n}return Object(K.a)(t,e),t}(a.a.Component);var ie=Object(i.connect)(function(e){return{search:e.movies.search,loading:e.loading}})(ce),se=function(e){function t(){var e,n;Object(H.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(F.a)(this,(e=Object(G.a)(t)).call.apply(e,[this].concat(o)))).render=function(){return a.a.createElement(U.View,{id:n.props.id,activePanel:n.props.id},a.a.createElement(U.Panel,{id:n.props.id},a.a.createElement(U.PanelHeader,null,"#\u0427\u0422\u041e\u041f\u041e\u0421\u041c\u041e\u0422\u0420\u0415\u0422\u042c"),a.a.createElement(U.Group,{title:"\u0425\u041e\u0427\u0423 \u041f\u041e\u0421\u041c\u041e\u0422\u0420\u0415\u0422\u042c"},a.a.createElement(re,{movies:n.props.bookmarks}))))},n}return Object(K.a)(t,e),t}(a.a.Component);var le=Object(i.connect)(function(e){return{bookmarks:e.movies.bookmarks}})(se),ue=function(e){function t(){var e,n;Object(H.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(F.a)(this,(e=Object(G.a)(t)).call.apply(e,[this].concat(a)))).onStoryChange=function(e){return n.props.dispatch(Object(l.push)("/"+e.currentTarget.dataset.story))},n}return Object(K.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.props.pageId||"main";return a.a.createElement(U.ConfigProvider,{insets:this.props.insets,isWebView:z.a},a.a.createElement(U.Epic,{activeStory:e,tabbar:a.a.createElement(U.Tabbar,null,a.a.createElement(U.TabbarItem,{onClick:this.onStoryChange,selected:"search"===e,"data-story":"search"},a.a.createElement($.a,null)),a.a.createElement(U.TabbarItem,{onClick:this.onStoryChange,selected:"main"===e,"data-story":"main",label:"12"},a.a.createElement(q.a,null)),a.a.createElement(U.TabbarItem,{onClick:this.onStoryChange,selected:"bookmarks"===e,"data-story":"bookmarks"},a.a.createElement(J.a,null)))},a.a.createElement(oe,{id:"main",accessToken:this.props.accessToken}),a.a.createElement(ie,{id:"search",accessToken:this.props.accessToken}),a.a.createElement(le,{id:"bookmarks",accessToken:this.props.accessToken})))}}]),t}(a.a.Component);var pe=Object(i.connect)(function(e){return{}})(ue);n(92);c.a.render(a.a.createElement(i.Provider,{store:V},a.a.createElement(l.ConnectedRouter,{history:B},a.a.createElement("div",null,a.a.createElement(s.a,{path:"/:pageId?",component:function(e){return a.a.createElement(pe,{pageId:e.match.params.pageId})}})))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/vk_app",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/vk_app","/service-worker.js");u?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):p(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):p(e)})}}()}},[[53,2,1]]]);
//# sourceMappingURL=main.b239d8fe.chunk.js.map